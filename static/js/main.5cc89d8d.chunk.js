(this["webpackJsonpbook-catalog-app"]=this["webpackJsonpbook-catalog-app"]||[]).push([[0],{13:function(e,t,a){e.exports={editBookForm:"EditBookModal_editBookForm__9l7nd",inputField:"EditBookModal_inputField__1VlMS",btnPrimary:"EditBookModal_btnPrimary__jzDEP"}},14:function(e,t,a){e.exports={addBookForm:"AddBookModal_addBookForm__mxnfI",inputField:"AddBookModal_inputField__3f953",btnPrimary:"AddBookModal_btnPrimary__1ypLD"}},25:function(e,t,a){e.exports={modalBackdrop:"Modal_modalBackdrop__1FpXf",modalBody:"Modal_modalBody__151Ye",fadeIn:"Modal_fadeIn__1-37R",modalClose:"Modal_modalClose__TVRbh",modalInner:"Modal_modalInner__7iVPH"}},28:function(e,t,a){e.exports={booksTable:"BooksTable_booksTable__3OgVA",booksTableControl:"BooksTable_booksTableControl__2mPpp",booksTableMessage:"BooksTable_booksTableMessage__Eoyv_"}},30:function(e,t,a){e.exports={booksPanel:"BooksPanel_booksPanel__lJfHM",searchBookHolder:"BooksPanel_searchBookHolder__-1J8M"}},31:function(e,t,a){e.exports={searchBook:"SearchBook_searchBook__VZ4jE",searchBookField:"SearchBook_searchBookField__98oai"}},32:function(e){e.exports=JSON.parse("{}")},35:function(e,t,a){e.exports={mainHeader:"Header_mainHeader__1NXMs"}},36:function(e,t,a){e.exports={HeaderLogo:"HeaderLogo_HeaderLogo__aIxQI"}},43:function(e,t,a){},48:function(e,t,a){"use strict";a.r(t);var o=a(8),n=a.n(o),r=a(21),l=a.n(r),i=a(2),s=a(3),c=a(7),d=a(5),u=a(6),b=(a(43),a(32),function(){function e(){Object(i.a)(this,e)}return Object(s.a)(e,[{key:"set",value:function(e,t){window.localStorage.setItem(e,t)}},{key:"get",value:function(e){var t=window.localStorage;return!!t.getItem(e)&&t.getItem(e)}}]),e}()),h=a(24),j=a(20),p=a(49),v=a(34),k=a(10),O=(Object(v.a)({apiKey:"AIzaSyA4BlfeMqLhjxOgz6SsCbZD18P2j-qQj-k",authDomain:"book-catalog-app-b2099.firebaseapp.com",projectId:"book-catalog-app-b2099",storageBucket:"book-catalog-app-b2099.appspot.com",messagingSenderId:"452535609431",appId:"1:452535609431:web:647270842adb54cf061b12",measurementId:"G-PJ2HN6TMSH"}),function(){function e(){Object(i.a)(this,e)}return Object(s.a)(e,[{key:"get",value:function(e,t){var a=Object(k.a)(),o=Object(k.c)(a,e);Object(k.b)(o,t)}},{key:"set",value:function(e,t){var a=Object(k.a)();return Object(k.e)(Object(k.c)(a,"".concat(e,"/").concat(t.id)),t)}},{key:"update",value:function(e,t,a){var o=Object(k.a)(),n=Object(k.c)(o,"".concat(e,"/").concat(t));return Object(k.f)(n,a)}},{key:"delete",value:function(e,t){var a=Object(k.a)(),o=Object(k.c)(a,"".concat(e,"/").concat(t));return Object(k.d)(o)}}]),e}()),x=a(1),g=new b,m=new O,B=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var o;return Object(i.a)(this,a),(o=t.call(this,e)).state={currentBook:null,searchValue:"",books:[]},o.addBookHandler=o.addBookHandler.bind(Object(c.a)(o)),o.deleteBookHandler=o.deleteBookHandler.bind(Object(c.a)(o)),o.updateBook=o.updateBook.bind(Object(c.a)(o)),o.searchInputChangeHandler=o.searchInputChangeHandler.bind(Object(c.a)(o)),o.setCurrentBookHandler=o.setCurrentBookHandler.bind(Object(c.a)(o)),o}return Object(s.a)(a,[{key:"addBookHandler",value:function(e){var t=Object(j.a)(this.state.books),a=Object(h.a)(Object(h.a)({},e),{},{id:Object(p.a)()});t.push(a),this.setState({books:t}),m.set("books",a).then((function(){console.log("added book")}))}},{key:"deleteBookHandler",value:function(e){var t=Object(j.a)(this.state.books).filter((function(t){return t.id!=e}));this.setState({books:t}),g.set("books",JSON.stringify(t)),m.delete("books",e).then((function(){console.log("deleted")}))}},{key:"updateBook",value:function(e,t){var a=Object(j.a)(this.state.books).map((function(a){return e==a.id?t:a}));this.setState({books:a}),m.update("books",e,t).then((function(){console.log("updated")})),console.log("edit")}},{key:"searchInputChangeHandler",value:function(e){this.setState((function(t){return{searchValue:e.target.value}}))}},{key:"setCurrentBookHandler",value:function(e){this.setState({currentBook:e})}},{key:"componentDidMount",value:function(){var e=this;m.get("books",(function(t){if(null!=t.val()){var a=t.val(),o=[];for(var n in a){var r=n,l=a[n],i=l.title,s=l.isbn,c=l.author,d=l.publisher,u=l.year_published,b=l.category;o.push({id:r,title:i,isbn:s,author:c,publisher:d,year_published:u,category:b})}e.setState({books:o})}else e.setState({books:[]})}))}},{key:"render",value:function(){var e=this.addBookHandler,t=this.deleteBookHandler,a=this.updateBook,o=this.searchInputChangeHandler,n=this.setCurrentBookHandler;return Object(x.jsx)(f.Provider,{value:Object(h.a)(Object(h.a)({},this.state),{},{addBookHandler:e,deleteBookHandler:t,updateBook:a,searchInputChangeHandler:o,setCurrentBookHandler:n}),children:this.props.children})}}]),a}(o.Component),f=Object(o.createContext)(),y=B,M=n.a.createContext(),C=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var o;return Object(i.a)(this,a),(o=t.call(this,e)).state={content:null},o.showModal=o.showModal.bind(Object(c.a)(o)),o.hideModal=o.hideModal.bind(Object(c.a)(o)),o}return Object(s.a)(a,[{key:"showModal",value:function(e){this.setState({content:e})}},{key:"hideModal",value:function(){this.setState({content:null})}},{key:"render",value:function(){var e=this.state.content,t=e||null;return Object(x.jsxs)(M.Provider,{value:{content:e,showModal:this.showModal,hideModal:this.hideModal},children:[this.props.children,t]})}}]),a}(n.a.Component),H=a(35),_=a.n(H),F=a(36),N=a.n(F);var S=function(){return Object(x.jsx)("div",{className:N.a.HeaderLogo,children:Object(x.jsx)("h1",{children:"Book Catalog App"})})};var I=function(){return Object(x.jsx)("header",{className:_.a.mainHeader,children:Object(x.jsx)(S,{})})},w=a(28),E=a.n(w),P=a(25),A=a.n(P),V=document.getElementById("modal-wrapper");function T(e){return Object(x.jsx)("div",{className:A.a.modalBackdrop,onClick:e.onClose})}function R(e){return Object(x.jsxs)("div",{className:A.a.modalBody,children:[Object(x.jsx)("button",{type:"button",className:A.a.modalClose,onClick:e.onClose,children:"x"}),e.title?Object(x.jsx)("h3",{children:e.title}):null,Object(x.jsx)("div",{className:A.a.modalInner,children:e.children})]})}var D=function(e){return Object(x.jsx)(M.Consumer,{children:function(t){var a=t.hideModal;return Object(x.jsxs)(n.a.Fragment,{children:[l.a.createPortal(Object(x.jsx)(T,{onClose:a}),V),l.a.createPortal(Object(x.jsx)(R,{title:e.title,onClose:a,children:e.children}),V)]})}})},Y=a(13),L=a.n(Y),J=a(12);var z=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",a={default:"Field is required",email:"Email is invalid.",isbn:"Value must be equal to 5 digits",year:"Year must be follow this format (YYYY)"},o=new RegExp(/^\s*$/);if(o.test(e))return{isValid:!1,errorMessage:a.default};if("isbn"==t){var n=new RegExp(/^[\d]{5}?$/),r=n.test(e);if(!r)return{isValid:!1,errorMessage:a.isbn}}else if("email"==t){var l=new RegExp(/^([A-Za-z0-9_\-.])+@([A-Za-z0-9_\-.])+/);if(!l.test(e))return{isValid:!1,errorMessage:a.email}}else if("year"==t){var i=new RegExp(/^[\d]{4}?$/);if(!i.test(e))return{isValid:!1,errorMessage:a.year}}return{isValid:!0,errorMessage:""}},q={value:"",isTouched:!1};function Z(e,t){switch(t.type){case"change":return{value:t.value,isTouched:!0};case"blur":return{value:e.value,isTouched:!0};case"reset":return{value:"",isTouched:!1}}}var $=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0,a=Object(o.useReducer)(Z,e?{value:e,isTouched:!1}:q),n=Object(J.a)(a,2),r=n[0],l=n[1],i=z(r.value,t),s=i.isValid,c=i.errorMessage,d=!s&&r.isTouched,u=function(e){l({type:"change",value:e.target.value})},b=function(){l({type:"blur"})},h=function(){l({type:"reset"})};return{value:r.value,isValid:s,hasError:d,inputChangehandler:u,inputBlurHandler:b,inputResetHandler:h,errorMessage:c}};var K=function(e){var t=!1,a=e.book,o=a.id,n=a.title,r=a.isbn,l=a.author,i=a.publisher,s=a.year_published,c=a.category,d=$(n),u=d.value,b=d.isValid,h=d.hasError,j=d.inputChangehandler,p=d.inputBlurHandler,v=d.inputResetHandler,k=d.errorMessage,O=$(r,"isbn"),g=O.value,m=O.isValid,B=O.hasError,y=O.inputChangehandler,M=O.inputBlurHandler,C=O.inputResetHandler,H=O.errorMessage,_=$(l),F=_.value,N=_.isValid,S=_.hasError,I=_.inputChangehandler,w=_.inputBlurHandler,E=_.inputResetHandler,P=_.errorMessage,A=$(i),V=A.value,T=A.isValid,R=A.hasError,Y=A.inputChangehandler,J=A.inputBlurHandler,z=A.inputResetHandler,q=A.errorMessage,Z=$(s,"year"),K=Z.value,Q=Z.isValid,X=Z.hasError,G=Z.inputChangehandler,U=Z.inputBlurHandler,W=Z.inputResetHandler,ee=Z.errorMessage,te=$(c),ae=te.value,oe=te.isValid,ne=te.hasError,re=te.inputChangehandler,le=te.inputBlurHandler,ie=te.inputResetHandler,se=te.errorMessage;return b&&m&&N&&T&&Q&&oe&&(t=!0),Object(x.jsx)(f.Consumer,{children:function(a){var n=a.updateBook;return Object(x.jsx)(D,{title:"Edit Book",onClose:e.onClose,children:Object(x.jsx)("div",{className:L.a.editBookForm,children:Object(x.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t&&(n(o,{id:o,title:u,isbn:g,author:F,publisher:V,year_published:K,category:ae}),v(),C(),E(),z(),W(),ie())},children:[Object(x.jsxs)("div",{className:"inputField ".concat(h?"invalid":""," ").concat(L.a.inputField),children:[Object(x.jsx)("label",{htmlFor:"book-title",children:"ISBN"}),Object(x.jsx)("input",{type:"text",id:"book-title",placeholder:"Title",onChange:j,onBlur:p,value:u}),Object(x.jsx)("div",{className:"vaildationMessage",children:k})]}),Object(x.jsxs)("div",{className:"inputField ".concat(B?"invalid":""," ").concat(L.a.inputField),children:[Object(x.jsx)("label",{htmlFor:"book-isbn",children:"ISBN"}),Object(x.jsx)("input",{type:"text",id:"book-isbn",placeholder:"ISBN",onChange:y,onBlur:M,value:g}),Object(x.jsx)("div",{className:"vaildationMessage",children:H})]}),Object(x.jsxs)("div",{className:"inputField ".concat(S?"invalid":""," ").concat(L.a.inputField),children:[Object(x.jsx)("label",{htmlFor:"book-author",children:"Author"}),Object(x.jsx)("input",{type:"text",id:"book-author",placeholder:"Author",onChange:I,onBlur:w,value:F}),Object(x.jsx)("div",{className:"vaildationMessage",children:P})]}),Object(x.jsxs)("div",{className:"inputField ".concat(R?"invalid":""," ").concat(L.a.inputField),children:[Object(x.jsx)("label",{htmlFor:"book-publisher",children:"Publisher"}),Object(x.jsx)("input",{type:"text",id:"book-publisher",onChange:Y,onBlur:J,placeholder:"Publisher",value:V}),Object(x.jsx)("div",{className:"vaildationMessage",children:q})]}),Object(x.jsxs)("div",{className:"inputField ".concat(X?"invalid":""," ").concat(L.a.inputField),children:[Object(x.jsx)("label",{htmlFor:"book-year-published",children:"Year Published"}),Object(x.jsx)("input",{type:"text",id:"book-year-published",onChange:G,onBlur:U,placeholder:"Year Published",value:K}),Object(x.jsx)("div",{className:"vaildationMessage",children:ee})]}),Object(x.jsxs)("div",{className:"inputField ".concat(ne?"invalid":""," ").concat(L.a.inputField),children:[Object(x.jsx)("label",{htmlFor:"book-category",children:"Category"}),Object(x.jsx)("input",{type:"text",id:"book-category",onChange:re,onBlur:le,placeholder:"Category",value:ae}),Object(x.jsx)("div",{className:"vaildationMessage",children:se})]}),Object(x.jsx)("button",{type:"submit",className:"btnPrimary ".concat(L.a.btnPrimary),disabled:!t,children:"Save"})]})})})}})};var Q=function(e){return Object(x.jsx)(n.a.Fragment,{children:Object(x.jsx)("thead",{children:Object(x.jsxs)("tr",{children:[Object(x.jsx)("th",{scope:"col",children:"Title"}),Object(x.jsx)("th",{scope:"col",children:"ISBN"}),Object(x.jsx)("th",{scope:"col",children:"Author"}),Object(x.jsx)("th",{scope:"col",children:"Publisher"}),Object(x.jsx)("th",{scope:"col",children:"Year Published"}),Object(x.jsx)("th",{scope:"col",children:"Category"}),Object(x.jsx)("th",{scope:"col"})]})})})};var X=function(e){var t=this;return Object(x.jsx)(M.Consumer,{children:function(e){return Object(x.jsx)(f.Consumer,{children:function(a){var o,n=a.books,r=a.deleteBookHandler,l=a.searchValue,i=a.setCurrentBookHandler,s=e.showModal;function c(e){s(Object(x.jsx)(K,{book:e})),i(e)}return o=(n=n.filter((function(e){if(""==l)return e;for(var t in e)if(e[t].toString().trim().toLowerCase().includes(l.trim().toLowerCase()))return e}))).length?n.map((function(e){var a=e.id,o=e.title,n=e.isbn,l=e.author,i=e.publisher,s=e.year_published,d=e.category;return Object(x.jsxs)("tr",{"data-book-id":a,children:[Object(x.jsx)("td",{children:o}),Object(x.jsx)("td",{children:n}),Object(x.jsx)("td",{children:l}),Object(x.jsx)("td",{children:i}),Object(x.jsx)("td",{children:s}),Object(x.jsx)("td",{children:d}),Object(x.jsxs)("td",{className:E.a.booksTableControl,children:[Object(x.jsx)("button",{type:"button",className:"btnSecondary booksEdit",onClick:c.bind(t,e),children:"Edit"}),Object(x.jsx)("button",{type:"button",className:"btnDanger booksDelete",onClick:r.bind(t,a),children:"Delete"})]})]},a)})):Object(x.jsx)("tr",{className:E.a.booksTableMessage,children:Object(x.jsx)("td",{colSpan:"7",children:"Books not available ..."})}),Object(x.jsx)("div",{className:E.a.booksTable,children:Object(x.jsxs)("table",{children:[Object(x.jsx)(Q,{}),Object(x.jsx)("tbody",{children:o})]})})}})}})},G=a(30),U=a.n(G),W=a(31),ee=a.n(W);var te=function(e){return Object(x.jsx)(f.Consumer,{children:function(e){var t=e.searchInputChangeHandler,a=e.searchValue;return Object(x.jsx)("div",{className:ee.a.searchBook,children:Object(x.jsx)("form",{children:Object(x.jsxs)("div",{className:"inputField ".concat(ee.a.searchBookField),children:[Object(x.jsx)("label",{htmlFor:"book-keyword",children:"Enter Keyword"}),Object(x.jsx)("input",{type:"text",id:"book-keyword",placeholder:"Search ...",value:a,onChange:t})]})})})}})},ae=a(14),oe=a.n(ae);var ne=function(e){var t=!1,a=$(""),o=a.value,n=a.isValid,r=a.hasError,l=a.inputChangehandler,i=a.inputBlurHandler,s=a.inputResetHandler,c=a.errorMessage,d=$("","isbn"),u=d.value,b=d.isValid,h=d.hasError,j=d.inputChangehandler,p=d.inputBlurHandler,v=d.inputResetHandler,k=d.errorMessage,O=$(""),g=O.value,m=O.isValid,B=O.hasError,y=O.inputChangehandler,M=O.inputBlurHandler,C=O.inputResetHandler,H=O.errorMessage,_=$(""),F=_.value,N=_.isValid,S=_.hasError,I=_.inputChangehandler,w=_.inputBlurHandler,E=_.inputResetHandler,P=_.errorMessage,A=$("","year"),V=A.value,T=A.isValid,R=A.hasError,Y=A.inputChangehandler,L=A.inputBlurHandler,J=A.inputResetHandler,z=A.errorMessage,q=$(""),Z=q.value,K=q.isValid,Q=q.hasError,X=q.inputChangehandler,G=q.inputBlurHandler,U=q.inputResetHandler,W=q.errorMessage;return n&&b&&m&&N&&T&&K&&(t=!0),Object(x.jsx)(f.Consumer,{children:function(e){var a=e.addBookHandler;return Object(x.jsx)(D,{title:"Add Book",children:Object(x.jsx)("div",{className:oe.a.addBookForm,children:Object(x.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t&&(a({title:o,isbn:u,author:g,publisher:F,year_published:V,category:Z}),s(),v(),C(),E(),J(),U())},children:[Object(x.jsxs)("div",{className:"inputField ".concat(r?"invalid":""," ").concat(oe.a.inputField),children:[Object(x.jsx)("label",{htmlFor:"book-title",children:"ISBN"}),Object(x.jsx)("input",{type:"text",id:"book-title",placeholder:"Title",onChange:l,onBlur:i,value:o}),Object(x.jsx)("div",{className:"vaildationMessage",children:c})]}),Object(x.jsxs)("div",{className:"inputField ".concat(h?"invalid":""," ").concat(oe.a.inputField),children:[Object(x.jsx)("label",{htmlFor:"book-isbn",children:"ISBN"}),Object(x.jsx)("input",{type:"text",id:"book-isbn",placeholder:"ISBN",onChange:j,onBlur:p,value:u}),Object(x.jsx)("div",{className:"vaildationMessage",children:k})]}),Object(x.jsxs)("div",{className:"inputField ".concat(B?"invalid":""," ").concat(oe.a.inputField),children:[Object(x.jsx)("label",{htmlFor:"book-author",children:"Author"}),Object(x.jsx)("input",{type:"text",id:"book-author",placeholder:"Author",onChange:y,onBlur:M,value:g}),Object(x.jsx)("div",{className:"vaildationMessage",children:H})]}),Object(x.jsxs)("div",{className:"inputField ".concat(S?"invalid":""," ").concat(oe.a.inputField),children:[Object(x.jsx)("label",{htmlFor:"book-publisher",children:"Publisher"}),Object(x.jsx)("input",{type:"text",id:"book-publisher",onChange:I,onBlur:w,placeholder:"Publisher",value:F}),Object(x.jsx)("div",{className:"vaildationMessage",children:P})]}),Object(x.jsxs)("div",{className:"inputField ".concat(R?"invalid":""," ").concat(oe.a.inputField),children:[Object(x.jsx)("label",{htmlFor:"book-year-published",children:"Year Published"}),Object(x.jsx)("input",{type:"text",id:"book-year-published",onChange:Y,onBlur:L,placeholder:"Year Published",value:V}),Object(x.jsx)("div",{className:"vaildationMessage",children:z})]}),Object(x.jsxs)("div",{className:"inputField ".concat(Q?"invalid":""," ").concat(oe.a.inputField),children:[Object(x.jsx)("label",{htmlFor:"book-category",children:"Category"}),Object(x.jsx)("input",{type:"text",id:"book-category",onChange:X,onBlur:G,placeholder:"Category",value:Z}),Object(x.jsx)("div",{className:"vaildationMessage",children:W})]}),Object(x.jsx)("button",{type:"submit",className:"btnPrimary ".concat(oe.a.btnPrimary),disabled:!t,children:"Submit"})]})})})}})};var re=function(e){return Object(x.jsx)(M.Consumer,{children:function(t){t.content;var a=t.showModal;return Object(x.jsxs)("div",{className:U.a.booksPanel,children:[Object(x.jsx)("div",{className:U.a.searchBookHolder,children:Object(x.jsx)(te,{onChangeHandler:e.onChangeHandler})}),Object(x.jsx)("button",{type:"button",className:"btnSecondary",onClick:function(){a(Object(x.jsx)(ne,{}))},children:"Add Book"})]})}})},le=(new O,new b,function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var o;return Object(i.a)(this,a),(o=t.call(this,e)).state={addBookModalIsActive:!1,editBookModalIsActive:!1,currentBook:null,searchValue:"",books:[]},o.showAddBookModal=o.showAddBookModal.bind(Object(c.a)(o)),o.hideAddBookModal=o.hideAddBookModal.bind(Object(c.a)(o)),o.showEditBookModal=o.showEditBookModal.bind(Object(c.a)(o)),o.hideEditBookModal=o.hideEditBookModal.bind(Object(c.a)(o)),o}return Object(s.a)(a,[{key:"showAddBookModal",value:function(){this.setState({addBookModalIsActive:!0})}},{key:"hideAddBookModal",value:function(){this.setState({addBookModalIsActive:!1})}},{key:"showEditBookModal",value:function(e){this.setState({currentBook:e})}},{key:"hideEditBookModal",value:function(){this.setState({editBookModalIsActive:!1})}},{key:"render",value:function(){var e=this.state,t=(e.addBookModalIsActive,e.editBookModalIsActive),a=e.currentBook;return Object(x.jsx)(n.a.Fragment,{children:Object(x.jsx)(y,{children:Object(x.jsxs)(C,{children:[Object(x.jsx)(I,{}),t?Object(x.jsx)(K,{onClose:this.hideEditBookModal,book:a}):null,Object(x.jsxs)("main",{children:[Object(x.jsx)(re,{onChangeHandler:this.searchInputChangeHandler,addBookModalShowHandler:this.showAddBookModal}),Object(x.jsx)(X,{})]})]})})})}}]),a}(n.a.Component)),ie=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,50)).then((function(t){var a=t.getCLS,o=t.getFID,n=t.getFCP,r=t.getLCP,l=t.getTTFB;a(e),o(e),n(e),r(e),l(e)}))};l.a.render(Object(x.jsx)(n.a.StrictMode,{children:Object(x.jsx)(le,{})}),document.getElementById("root")),ie()}},[[48,1,2]]]);
//# sourceMappingURL=main.5cc89d8d.chunk.js.map